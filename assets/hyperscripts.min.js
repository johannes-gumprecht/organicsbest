!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).hyperscripts={})}(this,function(e){"use strict";var o={ON_LOAD_DEPRECATED:"javascript/blocked",ON_LOAD:"hyperscript/defer-load",ON_ACTION:"hyperscript/on-action"},r="hs-ignore",i={whitelist:window.HS_SCRIPTS_WHITELIST,deferlist:window.HS_SCRIPTS_DEFERLIST},s={blacklisted:[]},c=window.HS_JS_OVERRIDES||[];window.HS_LOAD_ON_ACTION_SCRIPTS=window.HS_LOAD_ON_ACTION_SCRIPTS||[];function a(t,e){var n=t.src&&i.whitelist&&i.whitelist.some(function(e){return e.test(t.src)});return!(e&&e===o.ON_LOAD_DEPRECATED&&e===o.ON_LOAD||(e=e)&&"application/javascript"!==e&&"text/javascript"!==e&&"module"!==e&&"application/ecmascript"!==e||t.hasAttribute(r)||n||(n=t).src&&n.src.includes("jquery"))}function u(t,n){if(i.deferlist||c){if(n){var e=i.deferlist&&i.deferlist.some(function(e){return e.test(n)}),r=(o=n)?function(e){return e?{method:e.method||"default"}:null}(c?c.find(function(e){return o.includes(e.match)}):null):null,r=r&&"ON_ACTION"===r.method;return e||r}return!!t.innerHTML&&(i.deferlist&&i.deferlist.some(function(e){return e.test(t.innerHTML)}));var o}}var t=new MutationObserver(function(e){for(var t=0;t<e.length;t++)for(var r=e[t].addedNodes,n=0;n<r.length;n++)!function(e){var n=r[e];1===n.nodeType&&"SCRIPT"===n.tagName&&((e=n.type)===o.ON_LOAD||e===o.ON_LOAD_DEPRECATED&&n.getAttribute("hs-load")?s.blacklisted.push([n,"application/javascript"]):a(n,e)&&(s.blacklisted.push([n,n.type]),n.type=o.ON_LOAD,e=function e(t){n.getAttribute("type")!==o.ON_LOAD_DEPRECATED&&n.getAttribute("type")!==o.ON_LOAD||t.preventDefault(),n.removeEventListener("beforescriptexecute",e)},n.addEventListener("beforescriptexecute",e)))}(n)});function n(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function l(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.observe(document.documentElement,{childList:!0,subtree:!0});var b=document.createElement,h={src:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src"),type:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"type")};document.createElement=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("script"!==t[0].toLowerCase()||window.hsUnblocked)return b.bind(document).apply(void 0,t);var r=b.bind(document).apply(void 0,t);try{Object.defineProperties(r,{src:{get:function(){return h.src.get.call(this)},set:function(e){a(r,r.type)&&h.type.set.call(this,o.ON_LOAD),h.src.set.call(this,e)}},type:l(l({},h.type),{},{set:function(e){e=a(r,r.type)?o.ON_LOAD:e;h.type.set.call(this,e)}})}),r.setAttribute=function(e,t){"type"===e||"src"===e?r[e]=t:HTMLScriptElement.prototype.setAttribute.call(r,e,t)}}catch(e){console.warn("HyperScripts: unable to prevent script execution for script src ",r.src,".\n",'A likely cause would be because you are using a third-party browser extension that monkey patches the "document.createElement" function.')}return r};var v,m,O,w=null;function E(e,t){var n=new Blob([e],{type:"text/javascript"}),e=URL.createObjectURL(n),n=b.bind(document)("script");n.src=e,n.async=!1,A(n,t)}function A(e,t){t?(t.appendChild(e),t.parentNode?t.parentNode.insertBefore(e,t):document.head.appendChild(e),t.parentElement&&t.parentElement.removeChild(t)):document.head.appendChild(e)}window.hsDeferReady=((O=new Promise(function(e,t){return v=e,m=t})).resolve=v,O.reject=m,O),Object.defineProperty(window,"$",{configurable:!0,enumerable:!0,writeable:!0,get:function(){return w},set:function(e){var n;e&&(n=e.prototype.ready,e.prototype.ready=function(e){var t=this;return Promise.all([n,window.hsDeferReady]).then(function(){return n.call(t,e)})}),w=e}});e.loadScriptSynchronouslyReplace=E,e.unblock=function(){window.hsUnblocked=!0;var i=[],c=[],a=0;p(s.blacklisted).forEach(function(e,t){var n=d(e,2),r=n[0],o=n[1],e=function(e,t){for(var n,r=b.bind(document)("script"),o=0;o<e.attributes.length;o++){var i=e.attributes[o];try{r.setAttribute(i.name,i.value)}catch(e){}}for(n in e)n.startsWith("on")&&(r[n]=e[n]);return r.setAttribute("type",t||"application/javascript"),r.removeAttribute("hs-load"),r}(r,o),n=!(r.src||"application/javascript"!==o&&"text/javascript"!==o&&"module"!==o&&o);u(r,r.src)&&!function(e){if(e.src||!e.innerHTML)return!1;return/asyncLoad/.test(e.innerHTML)}(r)?window.HS_LOAD_ON_ACTION_SCRIPTS.push([r,o]):n?(e.innerHTML=r.innerHTML,e.innerHTML&&"module"===o||e.innerHTML&&e.innerHTML.includes("asyncLoad")?A(e,r):E(e.innerHTML,r)):(e.async=!!r.hasAttribute("async"),e.defer=!!r.hasAttribute("defer"),e.async?c.push([e,r]):e.defer?i.push([e,r]):A(e,r)),s.blacklisted.splice(t-a,1),a++}),i.forEach(function(e){e=d(e,2);A(e[0],e[1])}),c.forEach(function(e){var t=d(e,2),e=t[0],t=t[1];e.async=!1,A(e,t)}),window.hsFiredReplacementEvents||(E("\n            (function() {\n                if (window.hsDeferReady) {\n                    window.hsDeferReady.resolve();\n                }\n                window.document.dispatchEvent(new Event('DOMContentLoaded', {bubbles: true}));\n            })();\n        ",null),E("\n            (function() {\n                var loadEvent = document.createEvent('Event');\n                loadEvent.initEvent('load', false, false);\n                window.dispatchEvent(loadEvent);\n            })();\n        ",null),window.hsFiredReplacementEvents=!0),t.disconnect()},Object.defineProperty(e,"__esModule",{value:!0})});